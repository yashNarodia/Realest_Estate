{"ast":null,"code":"import _regeneratorRuntime from\"C:/Projects/Realest_Estate/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Projects/Realest_Estate/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from'axios';import{setAlert}from'./alert';import{SIGNUP_SUCCESS,SIGNUP_FAIL,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT}from'./types';export var login=function login(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var config,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:config={headers:{'Content-Type':'application/json'}};// const body = JSON.stringify({email, password});\n_context.prev=1;console.log(\"hello\");_context.next=5;return axios.post('http://localhost:8000/api/token/',{email:email,password:password},config);case 5:res=_context.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});dispatch(setAlert('Login Success','success'));_context.next=15;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log('err: ',_context.t0);dispatch({type:LOGIN_FAIL});dispatch(setAlert('Login Fail','error'));case 15:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var signup=function signup(name,email,password,password2){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:config={headers:{'Content-Type':'application/json'}};body=JSON.stringify({name:name,email:email,password:password,password2:password2});_context2.prev=2;_context2.next=5;return axios.post('http://localhost:8000/api/accounts/signup',body,config);case 5:res=_context2.sent;console.log('res: ',res);dispatch({type:SIGNUP_SUCCESS,payload:res.data});dispatch(login(email,password));_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);dispatch({type:SIGNUP_FAIL});dispatch(setAlert('Login Fail','error'));case 15:case\"end\":return _context2.stop();}},_callee2,null,[[2,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var logout=function logout(){return function(dispatch){dispatch(setAlert('Logout Success','success'));dispatch({type:LOGOUT});};};","map":{"version":3,"names":["axios","setAlert","SIGNUP_SUCCESS","SIGNUP_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","login","email","password","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","config","res","wrap","_callee$","_context","prev","next","headers","console","log","post","sent","type","payload","data","t0","stop","_x","apply","arguments","signup","name","password2","_ref2","_callee2","body","_callee2$","_context2","JSON","stringify","_x2","logout"],"sources":["C:/Projects/Realest_Estate/frontend/src/actions/auth.js"],"sourcesContent":["import axios from 'axios';\r\nimport { setAlert } from './alert';\r\n\r\nimport {\r\n    SIGNUP_SUCCESS,\r\n    SIGNUP_FAIL,\r\n    LOGIN_SUCCESS,\r\n    LOGIN_FAIL,\r\n    LOGOUT,\r\n} from './types';\r\n\r\n    export const login = (email, password) => async dispatch => {\r\n        const config = {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        // const body = JSON.stringify({email, password});\r\n        try{\r\n            console.log(\"hello\");\r\n            const res = await axios.post('http://localhost:8000/api/token/', {email,password}, config);\r\n            dispatch({\r\n                type: LOGIN_SUCCESS,\r\n                payload: res.data\r\n            });\r\n            dispatch(setAlert('Login Success', 'success'));\r\n        }catch(err){\r\n            console.log('err: ', err);\r\n            dispatch({\r\n                type: LOGIN_FAIL\r\n            });\r\n            dispatch(setAlert('Login Fail', 'error'));\r\n        }\r\n    }\r\n\r\nexport const signup = (name, email, password, password2) => async dispatch => {\r\n    const config = {\r\n        headers:{\r\n            'Content-Type': 'application/json'\r\n        }\r\n    }\r\n    const body = JSON.stringify({name, email, password, password2});\r\n\r\n    try{\r\n        const res = await axios.post('http://localhost:8000/api/accounts/signup', body, config);\r\n        console.log('res: ', res);\r\n        dispatch({\r\n            type: SIGNUP_SUCCESS,\r\n            payload: res.data\r\n        });\r\n        dispatch(login(email, password));\r\n    }catch(err){\r\n        dispatch({\r\n            type: SIGNUP_FAIL\r\n        });\r\n        dispatch(setAlert('Login Fail', 'error'));\r\n    }\r\n}\r\n\r\nexport const logout = () => dispatch => {\r\n    dispatch(setAlert('Logout Success', 'success'));\r\n    dispatch({type: LOGOUT})\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}